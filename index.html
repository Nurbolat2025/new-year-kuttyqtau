<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Global New Year 2026</title>
    
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0d47a1">
    <link rel="icon" type="image/png" href="icon-192.png">

    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <style>
        body {
            margin: 0; padding: 0;
            min-height: 100vh;
            background: linear-gradient(to bottom, #021B79, #0575E6);
            color: white;
            text-align: center;
            font-family: 'Segoe UI', sans-serif;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* --- –ñ–û“í–ê–†“í–´ –¢“∞–†–ê“ö–¢–´ –ú”ò–ó–Ü–† --- */
        .top-controls {
            position: fixed; top: 20px; right: 20px; z-index: 1000;
            display: flex; gap: 10px;
            background: rgba(0, 0, 0, 0.3);
            padding: 8px 15px; border-radius: 30px;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255,255,255,0.2);
        }

        .icon-btn {
            background: rgba(255, 255, 255, 0.2); color: white;
            border: none; border-radius: 50%;
            width: 42px; height: 42px; font-size: 20px;
            cursor: pointer; display: flex; align-items: center; justify-content: center;
            transition: 0.3s;
        }
        .icon-btn:hover { background: rgba(255, 255, 255, 0.4); transform: scale(1.1); }
        .icon-btn.playing { 
            background: #00e676; box-shadow: 0 0 10px #00e676;
            animation: pulse-green 1.5s infinite; 
        }
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 230, 118, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 230, 118, 0); }
        }

        select.lang-select {
            background: rgba(255, 255, 255, 0.95); color: #0d47a1;
            border: none; border-radius: 20px; padding: 5px 15px;
            font-weight: bold; font-size: 14px; cursor: pointer; outline: none;
        }

        /* --- –ù–ï–ì–Ü–ó–ì–Ü –ö–ê–†–¢–û–ß–ö–ê --- */
        h1 { color: #ffd700; text-shadow: 0 0 20px #ff8c00; font-size: 2rem; margin: 20px 0; }
        
        .card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px);
            padding: 30px; border-radius: 30px;
            border: 1px solid rgba(255,255,255,0.3);
            box-shadow: 0 15px 40px rgba(0,0,0,0.4);
            width: 85%; max-width: 420px; margin-top: 60px;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        input {
            width: 90%; padding: 15px; margin: 15px 0;
            border-radius: 15px; border: none; font-size: 18px; text-align: center;
            background: rgba(255,255,255,0.9); color: #333;
        }
        
        button.main-btn {
            width: 100%; padding: 16px; margin: 10px 0;
            border-radius: 15px; border: none; font-size: 18px; font-weight: bold;
            background: linear-gradient(135deg, #FF512F 0%, #DD2476 100%);
            color: white; cursor: pointer;
            box-shadow: 0 5px 15px rgba(221, 36, 118, 0.5);
            transition: transform 0.2s;
        }
        button.main-btn:active { transform: scale(0.95); }
        
        button.share-btn {
            background: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
            box-shadow: 0 5px 15px rgba(56, 239, 125, 0.4);
        }

        .hidden { display: none; }
        
        .city-name { font-size: 2rem; color: #84ffff; margin: 5px 0; text-shadow: 0 2px 5px rgba(0,0,0,0.5); }
        .greeting-text { font-size: 1.2rem; margin: 20px 0; line-height: 1.5; color: #fff; }
        
        .poem-box {
            background: rgba(0, 0, 0, 0.3); padding: 20px; border-radius: 20px;
            margin: 20px 0; border-left: 5px solid #ffd700;
            font-style: italic; white-space: pre-line;
            color: #fffde7; font-size: 1.1rem; line-height: 1.6;
            text-shadow: 1px 1px 2px black;
        }

        .snowflake {
            position: absolute; color: #fff; opacity: 0.9; 
            pointer-events: none; animation: fall linear infinite; z-index: -1;
        }
        @keyframes fall { to { transform: translateY(105vh); } }
        
        #localTime {
            font-family: 'Courier New', monospace; font-weight: bold;
            color: #ffd700; background: rgba(0,0,0,0.6); 
            padding: 8px 15px; border-radius: 20px; display: inline-block;
            border: 1px solid rgba(255, 215, 0, 0.3);
        }
    </style>
</head>
<body>

    <audio id="bgMusic" loop preload="auto">
        <source src="https://incompetech.com/music/royalty-free/mp3-royaltyfree/Jingle%20Bells.mp3" type="audio/mp3">
        <source src="https://soundbible.com/mp3/Merry_Christmas-Merry_Christmas-1120867056.mp3" type="audio/mp3">
    </audio>

    <div class="top-controls">
        <button id="musicBtn" class="icon-btn" onclick="toggleMusic()" title="Music">üîá</button>
        <select id="uiLangSelect" class="lang-select" onchange="changeUILanguage()">
            <option value="kk">üá∞üáø “ö–ê–ó</option>
            <option value="ru">üá∑üá∫ –†–£–°</option>
            <option value="en">üá∫üá∏ ENG</option>
            <option value="tr">üáπüá∑ TUR</option>
            <option value="fr">üá´üá∑ FRA</option>
            <option value="zh">üá®üá≥ CHN</option>
            <option value="ar">üá¶üá™ ARA</option>
        </select>
    </div>

    <div id="loginScreen" class="card">
        <div style="font-size: 60px; margin-bottom: 10px;">üéÖ</div>
        <h1 id="appTitle">–ñ–∞“£–∞ –ñ—ã–ª 2026</h1>
        <p id="appDesc">–ï—Å—ñ–º—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã–ø, —Å–∞—è—Ö–∞—Ç—Ç—ã –±–∞—Å—Ç–∞“£—ã–∑!</p>
        
        <input type="text" id="nameInput" placeholder="–ê—Ç—ã“£—ã–∑...">
        <button onclick="startJourney()" class="main-btn" id="btnStart">–ë–∞—Å—Ç–∞—É üöÄ</button>
    </div>

    <div id="journeyScreen" class="card hidden">
        <div id="localTime">00:00</div>
        
        <h2 id="cityName" class="city-name">City</h2>
        
        <p id="greetingMsg" class="greeting-text">...</p>
        
        <div id="poemBox" class="poem-box">...</div>

        <button onclick="nextCity()" class="main-btn" id="btnNext">‚úàÔ∏è</button>
        <button onclick="shareGreeting()" class="main-btn share-btn" id="btnShare">üîó</button>
    </div>

    <script>
        // --- –ë–ê–†–õ–´“ö –¢–Ü–õ–î–ï–ì–Ü –ò–ù–¢–ï–†–§–ï–ô–° –ú”ò–¢–Ü–ù–î–ï–†–Ü ---
        const uiText = {
            kk: { title: "–ñ–∞“£–∞ –ñ—ã–ª 2026", desc: "–ï—Å—ñ–º—ñ“£—ñ–∑–¥—ñ –∂–∞–∑—ã–ø, —Å–∞—è—Ö–∞—Ç—Ç—ã –±–∞—Å—Ç–∞“£—ã–∑!", ph: "–ê—Ç—ã“£—ã–∑...", start: "–ë–∞—Å—Ç–∞—É üöÄ", next: "–ö–µ–ª–µ—Å—ñ –µ–ª ‚úàÔ∏è", share: "–ë”©–ª—ñ—Å—É üîó", copied: "–ö”©—à—ñ—Ä—ñ–ª–¥—ñ!" },
            ru: { title: "–ù–æ–≤—ã–π –ì–æ–¥ 2026", desc: "–í–≤–µ–¥–∏—Ç–µ –∏–º—è –∏ –Ω–∞—á–Ω–∏—Ç–µ –ø—É—Ç–µ—à–µ—Å—Ç–≤–∏–µ!", ph: "–í–∞—à–µ –∏–º—è...", start: "–ü–æ–µ—Ö–∞–ª–∏ üöÄ", next: "–°–ª–µ–¥—É—é—â–∞—è —Å—Ç—Ä–∞–Ω–∞ ‚úàÔ∏è", share: "–ü–æ–¥–µ–ª–∏—Ç—å—Å—è üîó", copied: "–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!" },
            en: { title: "New Year 2026", desc: "Enter your name to start!", ph: "Your name...", start: "Start Journey üöÄ", next: "Next Country ‚úàÔ∏è", share: "Share üîó", copied: "Copied!" },
            tr: { title: "Yeni Yƒ±l 2026", desc: "Adƒ±nƒ±zƒ± girin ve yolculuƒüa ba≈ülayƒ±n!", ph: "Adƒ±nƒ±z...", start: "Ba≈üla üöÄ", next: "Sonraki √úlke ‚úàÔ∏è", share: "Payla≈ü üîó", copied: "Kopyalandƒ±!" },
            fr: { title: "Nouvel An 2026", desc: "Entrez votre nom pour commencer !", ph: "Votre nom...", start: "Commencer üöÄ", next: "Pays Suivant ‚úàÔ∏è", share: "Partager üîó", copied: "Copi√© !" },
            zh: { title: "2026 Êñ∞Âπ¥", desc: "ËæìÂÖ•ÊÇ®ÁöÑÂêçÂ≠óÂºÄÂßãÊóÖÁ®ãÔºÅ", ph: "‰Ω†ÁöÑÂêçÂ≠ó...", start: "ÂºÄÂßã üöÄ", next: "‰∏ã‰∏Ä‰∏™ÂõΩÂÆ∂ ‚úàÔ∏è", share: "ÂàÜ‰∫´ üîó", copied: "Â∑≤Â§çÂà∂ÔºÅ" },
            ar: { title: "ÿßŸÑÿ≥ŸÜÿ© ÿßŸÑÿ¨ÿØŸäÿØÿ© 2026", desc: "ÿ£ÿØÿÆŸÑ ÿßÿ≥ŸÖŸÉ ŸÑÿ™ÿ®ÿØÿ£ ÿßŸÑÿ±ÿ≠ŸÑÿ©!", ph: "ÿßÿ≥ŸÖŸÉ...", start: "Ÿäÿ®ÿØÿ£ üöÄ", next: "ÿßŸÑÿ®ŸÑÿØ ÿßŸÑÿ™ÿßŸÑŸä ‚úàÔ∏è", share: "ŸÖÿ¥ÿßÿ±ŸÉÿ© üîó", copied: "ŸÜÿ≥ÿÆ!" }
        };

        // --- “ö“∞–¢–¢–´“ö–¢–ê–£–õ–ê–† –ú–ï–ù ”®–õ–ï“¢–î–ï–† ---
        const contentData = {
            kk: {
                greet: "“ö“±—Ä–º–µ—Ç—Ç—ñ {name}, –ñ–∞“£–∞ –∂—ã–ª—ã“£—ã–∑–±–µ–Ω! –û—Å—ã “õ–∞–ª–∞–Ω—ã“£ —Å“±–ª—É–ª—ã“ì—ã–Ω–¥–∞–π ”©–º—ñ—Ä—ñ“£—ñ–∑ –∂–∞—Ä“õ—ã–Ω –±–æ–ª—Å—ã–Ω!",
                // –°–Ü–ó –ñ–Ü–ë–ï–†–ì–ï–ù –ñ–ê“¢–ê –ù“∞–°“ö–ê:
                poem: "–ö–µ–ª–¥—ñ –º—ñ–Ω–µ –ñ–∞“£–∞ –∂—ã–ª –¥–∞ –∂–∞—Ä“õ—ã—Ä–∞–ø,\n–ê“õ “õ–∞—Ä –∂–∞—Ç—ã—Ä –¥–∞–ª–∞–º—ã–∑–¥–∞ –∂–∞–ª—Ç—ã—Ä–∞–ø.\n–ë–∞—Ä—à–∞–º—ã–∑“ì–∞ –±–∞“õ-–±–µ—Ä–µ–∫–µ, “õ“±—Ç –¥–∞—Ä—ã–ø,\n–ú–æ–ª —Ä–∏–∑—ã“õ –∫–µ–ª—Å—ñ–Ω –±—ñ–∑–≥–µ —Å–∞—Ä“õ—ã—Ä–∞–ø!" 
            },
            ru: {
                greet: "–î–æ—Ä–æ–≥–æ–π(–∞—è) {name}, –° –ù–æ–≤—ã–º –ì–æ–¥–æ–º! –ü—É—Å—Ç—å —ç—Ç–æ—Ç –≥–æ–¥ –ø—Ä–∏–Ω–µ—Å–µ—Ç —Å—Ç–æ–ª—å–∫–æ —Å—á–∞—Å—Ç—å—è, —Å–∫–æ–ª—å–∫–æ –æ–≥–Ω–µ–π –≤ —ç—Ç–æ–º –≥–æ—Ä–æ–¥–µ!",
                poem: "–ü—É—Å—Ç—å –ù–æ–≤—ã–π –≥–æ–¥ –¥–æ–±—Ä–æ –Ω–µ—Å–µ—Ç,\n–ò —Å—á–∞—Å—Ç—å–µ –≤ –¥–æ–º–µ —Ä–∞—Å—Ü–≤–µ—Ç–µ—Ç.\n–ü—É—Å—Ç—å —Å–±—É–¥—É—Ç—Å—è –º–µ—á—Ç—ã —Å–ø–æ–ª–Ω–∞,\n–ò –±—É–¥–µ—Ç –∂–∏–∑–Ω—å –ª—é–±–≤–∏ –ø–æ–ª–Ω–∞!"
            },
            en: {
                greet: "Dear {name}, Happy New Year! Wishing you a year as bright and wonderful as this city!",
                poem: "May this New Year bring you light,\nMake your future warm and bright.\nJoy and peace in every day,\nSuccess and love will come your way!"
            },
            fr: {
                greet: "Cher {name}, Bonne Ann√©e! Que cette ann√©e vous apporte joie, bonheur et prosp√©rit√©!",
                poem: "Que cette ann√©e soit pleine de joie,\nQue le bonheur soit avec toi.\nSant√©, succ√®s et jours heureux,\nVoil√† mes plus sinc√®res v≈ìux !"
            },
            tr: {
                greet: "Sevgili {name}, Yeni Yƒ±lƒ±nƒ±z Kutlu Olsun! T√ºm dileklerinizin ger√ßekle≈ümesi dileƒüiyle!",
                poem: "Yeni yƒ±l sana huzur getirsin,\nT√ºm dertlerin artƒ±k bitsin.\nY√ºz√ºn her an ne≈üeyle g√ºls√ºn,\nHayallerin ger√ßeƒüe d√∂ns√ºn!"
            },
            ar: {
                greet: "ÿπÿ≤Ÿäÿ≤Ÿä {name}ÿå ÿπÿßŸÖ ÿ≥ÿπŸäÿØ! ÿ£ÿ™ŸÖŸÜŸâ ŸÑŸÉ ÿ≠Ÿäÿßÿ© ŸÖŸÑŸäÿ¶ÿ© ÿ®ÿßŸÑÿ≥ÿπÿßÿØÿ© ŸàÿßŸÑŸÜÿ¨ÿßÿ≠!",
                poem: "ÿπÿßŸÖ ÿ¨ÿØŸäÿØ ŸäŸáŸÑ ÿ®ÿßŸÑŸÜŸàÿ±ÿå\nŸäŸÖŸÑÿ£ ŸÇŸÑÿ®ŸÉ ÿ®ÿßŸÑÿ≥ÿ±Ÿàÿ±.\nÿ™ÿ≠ŸÇŸÇ ŸÅŸäŸá ŸÉŸÑ ÿßŸÑÿ£ŸÖÿßŸÜŸäÿå\nŸàÿ™ÿπŸäÿ¥ ŸÅŸä ÿÆŸäÿ± Ÿàÿ™ŸáÿßŸÜŸä."
            },
            zh: {
                greet: "‰∫≤Áà±ÁöÑ {name}, Êñ∞Âπ¥Âø´‰πê! ÊÑø‰Ω†Êñ∞ÁöÑ‰∏ÄÂπ¥‰∏á‰∫ãÂ¶ÇÊÑèÔºåÂøÉÊÉ≥‰∫ãÊàê!",
                poem: "Êñ∞Âπ¥Êù•‰∏¥ÂñúÊ∞îÊµìÔºå\n‰∏á‰∫ãÂ¶ÇÊÑè‰πêËûçËûç„ÄÇ\nÊÑø‰Ω†Ê¢¶ÊÉ≥ÁöÜÊàêÁúüÔºå\nÂπ∏Á¶èÂÆâÂ∫∑‰º¥‰∏ÄÁîü„ÄÇ"
            }
        };

        const destinations = [
            { name: "Astana üá∞üáø", tz: "Asia/Almaty", lang: "kk" },
            { name: "Paris üá´üá∑", tz: "Europe/Paris", lang: "fr" },
            { name: "New York üá∫üá∏", tz: "America/New_York", lang: "en" },
            { name: "Istanbul üáπüá∑", tz: "Europe/Istanbul", lang: "tr" },
            { name: "Dubai üá¶üá™", tz: "Asia/Dubai", lang: "ar" },
            { name: "Beijing üá®üá≥", tz: "Asia/Shanghai", lang: "zh" },
            { name: "Moscow üá∑üá∫", tz: "Europe/Moscow", lang: "ru" },
            { name: "London üá¨üáß", tz: "Europe/London", lang: "en" }
        ];

        // --- –õ–û–ì–ò–ö–ê ---
        let currentDestIndex = 0;
        let userName = "Dosym";
        const audio = document.getElementById('bgMusic');
        let isMusicPlaying = false;

        window.onload = () => {
            const urlParams = new URLSearchParams(window.location.search);
            if(urlParams.get('name')) {
                document.getElementById('nameInput').value = urlParams.get('name');
            }
            createSnow();
            changeUILanguage();
            audio.volume = 0.5;
        };

        function changeUILanguage() {
            const lang = document.getElementById('uiLangSelect').value;
            const t = uiText[lang];
            
            document.getElementById('appTitle').textContent = t.title;
            document.getElementById('appDesc').textContent = t.desc;
            document.getElementById('nameInput').placeholder = t.ph;
            document.getElementById('btnStart').textContent = t.start;
        }

        function toggleMusic() {
            const btn = document.getElementById('musicBtn');
            if (isMusicPlaying) {
                audio.pause();
                isMusicPlaying = false;
                btn.innerHTML = "üîá";
                btn.classList.remove('playing');
            } else {
                audio.play().then(() => {
                    isMusicPlaying = true;
                    btn.innerHTML = "üéµ";
                    btn.classList.add('playing');
                }).catch(err => console.log(err));
            }
        }

        function startJourney() {
            const input = document.getElementById('nameInput');
            userName = input.value.trim() || "Friend";
            
            document.getElementById('loginScreen').classList.add('hidden');
            document.getElementById('journeyScreen').classList.remove('hidden');
            
            confetti({ particleCount: 150, spread: 80, origin: { y: 0.6 } });
            if(!isMusicPlaying) toggleMusic();
            
            updateContent();
            setInterval(updateTime, 1000);
        }

        function updateContent() {
            const city = destinations[currentDestIndex];
            const langCode = contentData[city.lang] ? city.lang : 'en';
            const data = contentData[langCode];
            const localUI = uiText[langCode] || uiText['en']; // –¢“Ø–π–º–µ–ª–µ—Ä “Ø—à—ñ–Ω —Å–æ–ª –µ–ª–¥—ñ“£ —Ç—ñ–ª—ñ–Ω –∞–ª—É

            document.getElementById('cityName').textContent = city.name;
            document.getElementById('greetingMsg').innerHTML = data.greet.replace("{name}", `<b style="color:#ffd700">${userName}</b>`);
            document.getElementById('poemBox').textContent = data.poem;

            // –¢“Æ–ô–ú–ï–õ–ï–† –¢–Ü–õ–Ü–ù –°–û–õ –ï–õ–î–Ü“¢ –¢–Ü–õ–Ü–ù–ï –ê–£–´–°–¢–´–†–£
            document.getElementById('btnNext').innerHTML = localUI.next;
            document.getElementById('btnShare').innerHTML = localUI.share;

            updateTime();
        }

        function nextCity() {
            const card = document.getElementById('journeyScreen');
            card.style.transform = 'scale(0.9) translateX(-20px)';
            card.style.opacity = '0';
            setTimeout(() => {
                currentDestIndex = (currentDestIndex + 1) % destinations.length;
                updateContent();
                card.style.transform = 'scale(1) translateX(0)';
                card.style.opacity = '1';
                confetti({ particleCount: 50, spread: 60, origin: { y: 0.7 } });
            }, 300);
        }

        function updateTime() {
            const city = destinations[currentDestIndex];
            try {
                const now = new Date();
                const timeStr = new Intl.DateTimeFormat('en-GB', { timeZone: city.tz, hour: '2-digit', minute: '2-digit', second: '2-digit' }).format(now);
                document.getElementById('localTime').textContent = timeStr;
            } catch(e) { }
        }

        function shareGreeting() {
            const url = window.location.protocol + "//" + window.location.host + window.location.pathname + "?name=" + encodeURIComponent(userName);
            
            const city = destinations[currentDestIndex];
            const langCode = contentData[city.lang] ? city.lang : 'en';
            const localUI = uiText[langCode] || uiText['en'];

            if (navigator.share) {
                navigator.share({ title: 'New Year Wish', url: url });
            } else {
                navigator.clipboard.writeText(url).then(() => {
                    const btn = document.getElementById('btnShare');
                    const original = btn.innerHTML;
                    btn.textContent = localUI.copied;
                    setTimeout(() => btn.innerHTML = original, 2000);
                });
            }
        }

        function createSnow() {
            const symbols = ['‚ùÑ', '‚ùÖ', '‚ùÜ', '‚Ä¢'];
            setInterval(() => {
                const snow = document.createElement('div');
                snow.className = 'snowflake';
                snow.innerHTML = symbols[Math.floor(Math.random() * symbols.length)];
                snow.style.left = Math.random() * 100 + 'vw';
                snow.style.fontSize = Math.random() * 20 + 10 + 'px';
                snow.style.animationDuration = Math.random() * 5 + 5 + 's';
                document.body.appendChild(snow);
                setTimeout(() => snow.remove(), 10000);
            }, 200);
        }
    </script>
</body>
</html>
